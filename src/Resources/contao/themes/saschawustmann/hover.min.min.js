var Theme={isWebkit:(Browser.chrome||Browser.safari||navigator.userAgent.match(/(?:webkit|khtml)/i)),hoverRow:function(h,g){var f=$(h).getChildren();for(var e=0;e<f.length;e++){if(f[e].nodeName.toLowerCase()=="td"){f[e].setStyle("background-color",(g?"#fffce1":""))}}window.console&&console.warn('The Theme.hoverRow() function has been deprecated in Contao 4 and will be removed in Contao 5. Assign the CSS class "hover-row" instead.')},hoverDiv:function(d,c){if(!c){d.removeAttribute("data-visited")}$(d).setStyle("background-color",(c?"#fffce1":""));window.console&&console.warn('The Theme.hoverDiv() function has been deprecated in Contao 4 and will be removed in Contao 5. Assign the CSS class "hover-div" instead.')},stopClickPropagation:function(){$$(".picker_selector").each(function(b){b.getElements("a").each(function(a){a.addEvent("click",function(d){d.stopPropagation()})})});$$(".picker_selector,.click2edit").each(function(b){b.getElements('input[type="checkbox"]').each(function(a){a.addEvent("click",function(d){d.stopPropagation()})})})},setupCtrlClick:function(){$$(".click2edit").each(function(b){b.getElements("a").each(function(a){a.addEvent("click",function(d){d.stopPropagation()})});if(Browser.Features.Touch){b.addEvent("click",function(){if(!b.getAttribute("data-visited")){b.setAttribute("data-visited","1")}else{b.getElements("a").each(function(a){if(a.hasClass("edit")){document.location.href=a.href}});b.removeAttribute("data-visited")}})}else{b.addEvent("click",function(d){var a=Browser.Platform.mac?d.event.metaKey:d.event.ctrlKey;if(!a){return}if(d.event.shiftKey){b.getElements("a").each(function(c){if(c.hasClass("editheader")){document.location.href=c.href}})}else{b.getElements("a").each(function(c){if(c.hasClass("edit")){document.location.href=c.href}})}})}})},setupTextareaResizing:function(){$$(".tl_textarea").each(function(d){if(Browser.ie6||Browser.ie7||Browser.ie8){return}if(d.hasClass("noresize")||d.retrieve("autogrow")){return}var f=new Element("div",{html:"X",styles:{position:"absolute",top:0,left:"-999em","overflow-x":"hidden"}}).setStyles(d.getStyles("font-size","font-family","width","line-height")).inject(document.body);if(d.getStyle("-moz-box-sizing")=="border-box"||d.getStyle("-webkit-box-sizing")=="border-box"||d.getStyle("box-sizing")=="border-box"){f.setStyles({padding:d.getStyle("padding"),border:d.getStyle("border-left")})}var e=Math.max(f.clientHeight,30);d.addEvent("input",function(){f.set("html",this.get("value").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n|\r\n/g,"<br>X"));var a=Math.max(e,f.getSize().y);if(this.clientHeight!=a){this.tween("height",a)}}).set("tween",{duration:100}).setStyle("height",e+"px");d.fireEvent("input");d.store("autogrow",true)})},setupMenuToggle:function(){var b=$("burger");if(!b){return}b.addEvent("click",function(){document.body.toggleClass("show-navigation")}).addEvent("keydown",function(a){if(a.event.keyCode==27){document.body.removeClass("show-navigation")}})},setupProfileToggle:function(){var c=$("tmenu");if(!c){return}var d=c.getElements(".submenu");if(!d){return}Array.prototype.forEach.call(d,function(a){var b=a.getFirst("span");if(!b){return}b.addEvent("click",function(e){if(a.hasClass("active")){a.removeClass("active")}else{a.addClass("active")}e.stopPropagation()})});$(document.body).addEvent("click",function(){Array.prototype.forEach.call(d,function(a){if(a.hasClass("active")){a.removeClass("active")}})})},hideMenuOnScroll:function(){if(!("ontouchmove" in window)){return}var e=window.getSize().y,f=window.getScrollSize().y-e,d=0;if(e>=f){return}window.addEvent("touchmove",function(){var a=window.getScroll().y;if(Math.abs(d-a)<20){return}if(a>0&&a>d){$("header").addClass("down")}else{$("header").removeClass("down")}d=a}).addEvent("scroll",function(){if(window.getScroll().y<1){$("header").removeClass("down")}})},setupSplitButtonToggle:function(){var f=$("sbtog");if(!f){return}var e=f.getParent(".split-button").getElement("ul"),h,g;f.addEvent("click",function(a){h=false;e.toggleClass("invisible");f.toggleClass("active");a.stopPropagation()});$(document.body).addEvent("click",function(){h=false;e.addClass("invisible");f.removeClass("active")});$(document.body).addEvent("keydown",function(a){h=(a.event.keyCode==9)});[f].append(e.getElements("button")).each(function(a){a.addEvent("focus",function(){if(!h){return}e.removeClass("invisible");f.addClass("active");clearTimeout(g)});a.addEvent("blur",function(){if(!h){return}g=setTimeout(function(){e.addClass("invisible");f.removeClass("active")},100)})});f.set("tabindex","-1")}};window.addEvent("domready",function(){Theme.stopClickPropagation();Theme.setupCtrlClick();Theme.setupTextareaResizing();Theme.setupMenuToggle();Theme.setupProfileToggle();Theme.hideMenuOnScroll();Theme.setupSplitButtonToggle()});window.addEvent("ajax_change",function(){Theme.stopClickPropagation();Theme.setupCtrlClick();Theme.setupTextareaResizing()});